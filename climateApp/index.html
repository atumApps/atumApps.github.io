<!DOCTYPE html>
<!-- Inspired and modified from CodingNepal - www.codingnepalweb.com -->
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Weather</title>
    <link rel="stylesheet" href="../weatherApp/style.css">
    <!-- <link rel="stylesheet" href="style.css"> -->
    <!-- <link rel="stylesheet" href="../css/templatemo-ocean-vibes.css"> -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- <script src="script.js" defer></script> -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <!-- <script type="text/javascript" src="js/j360.js" ></script> -->

    <script type="text/javascript">
      const maxImages = 90;
      const models = ["HadGEM3-GC3.1-MM", "CNRM-CM6.1-HR"];
      const models_short = ["HG3", "CNRM"];
      const endYears = ["2033", "2099"];
      const longTimeText = ["in the next 10 years", "between now and the end of the century"];
      const hemispheres = ["Northern", "Southern"];
      const hemispheres_short = ["NH", "SH"];

      // Start values
      var modelIndex = 0;
      var timeIndex = 0;
      var hemiIndex = 0;
    
      jQuery(document).ready(function() {
        jQuery('#product').j360(clickedOverride=false, imageOffset=0);

        $("button[name='modelToggle']").click(function(){
          modelIndex += 1;
          while (modelIndex >= models.length) {
            modelIndex -= models.length;
          }
          console.log("modelToggle BUTTON CLICKED", modelIndex);
          const imageIndex = modelIndex * maxImages * endYears.length * hemispheres.length + timeIndex * maxImages * hemispheres.length + hemiIndex * maxImages;
          jQuery('#product').j360(clickedOverride=false, imageOffset=imageIndex);
          document.getElementById("modelToggle").innerHTML = models[modelIndex]
          document.getElementById("modelText").innerHTML = models[modelIndex]
        });

        $("button[name='timeToggle']").click(function(){
          timeIndex += 1;
          while (timeIndex >= endYears.length) {
            timeIndex -= endYears.length;
          }
          console.log("timeToggle BUTTON CLICKED", timeIndex);
          const imageIndex = modelIndex * maxImages * endYears.length * hemispheres.length + timeIndex * maxImages * hemispheres.length + hemiIndex * maxImages;
          jQuery('#product').j360(clickedOverride=false, imageOffset=imageIndex);
          document.getElementById("timeToggle").innerHTML = endYears[timeIndex]
          document.getElementById("timeText").innerHTML = longTimeText[timeIndex]
        });

        $("button[name='hemiToggle']").click(function(){
          hemiIndex += 1;
          while (hemiIndex >= hemispheres.length) {
            hemiIndex -= hemispheres.length;
          }
          console.log("hemiToggle BUTTON CLICKED", hemiIndex);
          const imageIndex = modelIndex * maxImages * endYears.length * hemispheres.length + timeIndex * maxImages * hemispheres.length + hemiIndex * maxImages;
          jQuery('#product').j360(clickedOverride=false, imageOffset=imageIndex);
          document.getElementById("hemiToggle").innerHTML = hemispheres[hemiIndex]
          document.getElementById("hemiText").innerHTML = hemispheres[hemiIndex]
        });
      });
    </script>

    
  </head>
  <body>
    <h1>Matt's Climate App (JavaScript and visualisation demo)</h1>
    <div class="container">
      <div class="plot-details">
        <h3>Plot details:</h3>
        <div class="plot-detail">
          <li><b>Model: </b><button type="button" value="HadGEM3-GC3.1-MM" name="modelToggle" id="modelToggle" class="button">HadGEM3-GC3.1-MM</button></li>
          <li><b>Variable: </b>Sea surface temperature (SST, &degC)</li>
          <li><b>Scenario: </b>SSP5-8.5</li>
          <li><b>Time: </b><button type="button" value="2033" name="timeToggle" id="timeToggle" class="button">2033</button> minus 2023 (annual means)</li>
          <li><b>Focus: </b><button type="button" value="NH" name="hemiToggle" id="hemiToggle" class="button">Northern</button> hemisphere focus</li><br>
          <li><b>Description: </b>Projected global SST change <span id="timeText">in the next 10 years</span> as simulated by <span id="modelText">HadGEM3-GC3.1-MM</span>, viewed from <span id="hemiText">Northern</span> hemisphere.</li>
          <br>Select the <span class="textEmphasis">model</span>, <span class="textEmphasis">time</span>, or <span class="textEmphasis">focus</span> to toggle between options.
          <br><br>Touch and drag the image to reveal and explore...
        </div>
      </div>

      <div class="figure-container">
        <div id="product" class="myBox">
          
        </div>
      </div>
    </div>
    
    <footer class="tm-footer">
      <span>Copyright &copy; 2024 Matthew Menary</span>
    </footer>

    <script>
      
      // const endYears = ["2033", "2099"];
      // const maxImages = 90;
      // const hemispheres = ["NH", "SH"];

      for (let j = 0; j < models.length; j++) {    // Models
        const model_short = models_short[j];

        for (let k = 0; k < endYears.length; k++) {  // End years
          const end_year = endYears[k];

          for (let l = 0; l < hemispheres.length; l++) {     // Hemispheres
            const hemiStr = hemispheres_short[l];

            for (let i = 0; i < maxImages; i++) {     // Frames
              const num = i * 4;
              var numStr = "" + num;
              numStr = numStr.padStart(3, "0");
              
              var elem = document.createElement("img");
              const filename = 'cmip_frames/SSTdiff_' + model_short + '_' + end_year + '_' + numStr + '_' + hemiStr + '.jpg'
              console.log(filename)
              elem.src = filename;
              elem.className = "myImg";
              document.getElementById("product").appendChild(elem);
            };
          };
        };
      };
    </script>
    
    <script type="text/javascript" src="js/j360.js" ></script>

    <!-- <script>
      function incrementModelToggle() {
        console.log("incrementModelToggle")
        modelIndex += 1
        while (modelIndex >= models.length) {
          modelIndex -= models.length
        }

      }
    </script> -->

  </body>
</html>





